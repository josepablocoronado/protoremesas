/* =============================================
   CAJA VECINA — SISTEMA DE DISEÑO V3
   Archivo CSS único · 17 pantallas
   ============================================= */
:root {
  --orange: #FF6B00; --orange-dark: #E05A00; --orange-light: #FFF3EB;
  --gray-bg: #F5F5F5; --gray-border: #E0E0E0; --gray-text: #666; --gray-ph: #AAA;
  --black: #1A1A1A; --white: #FFF; --green: #34C759;
  --blue-bg: #EBF4FF; --blue-border: #B3D4F5; --blue-text: #2C6EAB;
  --r-sm: 8px; --r-md: 12px; --r-lg: 24px;
}
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'Segoe UI', sans-serif; background: #DEDEDE; min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 20px; }

/* PHONE */
.phone { width: 360px; height: 640px; background: var(--white); box-shadow: 0 8px 40px rgba(0,0,0,.2); overflow: hidden; display: flex; flex-direction: column; position: relative; }

/* HEADERS */
.header { background: var(--orange); color: var(--white); display: flex; align-items: center; justify-content: space-between; padding: 0 16px; height: 56px; flex-shrink: 0; }
.header .logo { display: flex; align-items: center; gap: 8px; font-size: 18px; font-weight: 700; }
.header .logo-box { width: 30px; height: 30px; background: var(--white); border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 16px; }
.header .logo img { height: 32px; width: auto; display: block; }
.header .menu-icon { font-size: 22px; cursor: pointer; }
.header-nav { background: var(--orange); color: var(--white); display: flex; align-items: center; padding: 0 16px; height: 56px; flex-shrink: 0; position: relative; }
.header-nav .back-btn { font-size: 24px; cursor: pointer; color: var(--white); background: none; border: none; padding: 0; line-height: 1; position: absolute; left: 16px; }
.header-nav .title { font-size: 17px; font-weight: 600; color: var(--white); text-align: center; flex: 1; }

/* CONTENT */
.content { flex: 1; overflow-y: auto; padding: 20px 16px; background: transparent; }
.content-orange { flex: 1; background: var(--orange); display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; position: relative; }

/* HOME */
.saldo-card { background: var(--white); border-radius: var(--r-md); padding: 18px; box-shadow: 0 1px 6px rgba(0,0,0,.07); border: 1px solid var(--gray-border); margin-bottom: 18px; }
.saldo-label { font-size: 13px; color: var(--gray-text); margin-bottom: 5px; }
.saldo-amount { font-size: 28px; font-weight: 700; color: var(--black); display: flex; align-items: center; justify-content: space-between; }
.eye-icon { color: #4A90E2; font-size: 20px; cursor: pointer; }
.actions-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.action-card { background: var(--white); border: 1.5px solid var(--gray-border); border-radius: var(--r-md); padding: 26px 14px; text-align: center; cursor: pointer; transition: all .15s; text-decoration: none; color: var(--black); display: block; }
.action-card:hover { border-color: var(--orange); transform: translateY(-2px); }
.action-card .icon { font-size: 38px; margin-bottom: 10px; }
.action-card .label { font-size: 14px; font-weight: 600; }
.version-area { text-align: center; margin-top: 20px; color: var(--gray-text); font-size: 12px; }
.version-dots { display: flex; justify-content: center; gap: 6px; margin-bottom: 5px; }
.dot { width: 7px; height: 7px; border-radius: 50%; background: var(--gray-border); }
.dot.active { background: #999; }
.nav-footer { display: flex; border-top: 1px solid var(--gray-border); background: var(--white); flex-shrink: 0; }
.nav-item { flex: 1; padding: 10px 0; text-align: center; cursor: pointer; border-top: 3px solid transparent; }
.nav-item.active { border-top-color: var(--orange); }
.nav-item .nav-icon { font-size: 20px; color: #999; }
.nav-item.active .nav-icon { color: var(--orange); }
.nav-item .nav-label { font-size: 11px; color: #999; margin-top: 2px; }
.nav-item.active .nav-label { color: var(--orange); font-weight: 600; }

/* ONBOARDING */
.ob-card { background: var(--gray-bg); border-radius: var(--r-md); padding: 20px; margin-bottom: 14px; }
.ob-icon { font-size: 52px; margin-bottom: 12px; display: block; text-align: center; }
.ob-title { font-size: 20px; font-weight: 700; color: var(--black); margin-bottom: 4px; }
.ob-subtitle { font-size: 14px; color: var(--gray-text); margin-bottom: 14px; }
.ob-section-title {
    font-size: 13px;
    font-weight: 700;
    color: var(--black);
    margin-bottom: 10px;
    margin-top: 40px;
}
.ob-list { list-style: none; }
.ob-list li { font-size: 13px; color: #333; padding: 4px 0; display: flex; align-items: flex-start; gap: 8px; line-height: 1.5; }
.ob-list li::before { content: "✓"; color: var(--orange); font-weight: 700; flex-shrink: 0; }
.alert-info { background: var(--blue-bg); border: 1px solid var(--blue-border); border-radius: var(--r-sm); padding: 12px 14px; display: flex; gap: 10px; align-items: flex-start; margin-bottom: 14px; }
.alert-info .ai-icon { font-size: 16px; flex-shrink: 0; color: var(--blue-text); }
.alert-info p { font-size: 13px; color: var(--blue-text); line-height: 1.4; }

/* FORM */
.form-group { margin-bottom: 14px; }
.form-label { font-size: 14px; font-weight: 500; color: var(--black); margin-bottom: 6px; display: block; }
.form-input, .form-select { width: 100%; padding: 13px 14px; border: 1.5px solid var(--gray-border); border-radius: var(--r-sm); font-size: 15px; color: var(--black); background: var(--white); outline: none; transition: border-color .15s; -webkit-appearance: none; appearance: none; }
.form-input:focus, .form-select:focus { border-color: var(--orange); }
.form-input::placeholder { color: var(--gray-ph); }
.form-select-wrap { position: relative; }
.form-select-wrap::after { content: "▾"; position: absolute; right: 14px; top: 50%; transform: translateY(-50%); color: #666; pointer-events: none; font-size: 14px; }
.input-prefix-wrap { display: flex; }
.input-prefix { background: var(--gray-bg); border: 1.5px solid var(--gray-border); border-right: none; border-radius: var(--r-sm) 0 0 var(--r-sm); padding: 13px 12px; font-size: 15px; font-weight: 600; color: var(--black); flex-shrink: 0; }
.input-prefix-wrap .form-input { border-radius: 0 var(--r-sm) var(--r-sm) 0; }
.form-header { display: flex; align-items: center; gap: 10px; margin-bottom: 18px; }
.form-header-icon { font-size: 26px; }
.form-header-title { font-size: 16px; font-weight: 600; color: var(--black); }

/* TECLADO RUT */
.numeric-keyboard { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 18px; }
.key { background: var(--white); border: 1.5px solid var(--gray-border); border-radius: var(--r-sm); padding: 18px 0; font-size: 22px; font-weight: 400; cursor: pointer; text-align: center; transition: all .1s; user-select: none; color: var(--black); }
.key:active { background: var(--gray-bg); transform: scale(.95); }
.key.key-empty { visibility: hidden; }

/* PIN KEYBOARD */
.pin-area { display: flex; flex-direction: column; align-items: center; justify-content: center; background: var(--orange); padding: 32px 20px 20px; }
.pin-area .pin-header-text { font-size: 15px; color: white; margin-bottom: 4px; font-weight: 400; }
.pin-area .pin-main-label { font-size: 20px; font-weight: 600; color: white; margin-bottom: 24px; }
.pin-dots { display: flex; gap: 14px; }
.pin-dot { width: 14px; height: 14px; border-radius: 50%; border: 2px solid rgba(255,255,255,.8); background: transparent; transition: background .15s; }
.pin-dot.filled { background: white; }
.pin-keyboard { position: fixed; bottom: 0; left: 0; width: 100%; display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; padding: 16px; background: #F0F0F0; }
.pin-key { background: var(--white); border: none; border-radius: var(--r-sm); padding: 22px 0; font-size: 26px; font-weight: 300; cursor: pointer; text-align: center; transition: opacity .1s; user-select: none; color: var(--black); box-shadow: 0 1px 3px rgba(0,0,0,.1); }
.pin-key:active { opacity: .7; }
.pin-key.key-red { background: #FF3B30; color: white; font-size: 20px; font-weight: 600; }
.pin-key.key-yellow { background: #FFCC00; color: white; font-size: 22px; font-weight: 600; }
.pin-key.key-green { background: #34C759; color: white; font-size: 20px; font-weight: 600; }
.pin-key.key-zero { grid-column: 2; }

/* BOTONES */
.btn { width: 100%; padding: 15px; border: none; border-radius: var(--r-lg); font-size: 16px; font-weight: 600; cursor: pointer; transition: background .15s, opacity .15s; text-decoration: none; display: block; text-align: center; }
.btn-primary { background: var(--orange); color: white; }
.btn-primary:hover:not(:disabled) { background: var(--orange-dark); }
.btn-primary:disabled { background: var(--gray-border); color: #999; cursor: not-allowed; }
.btn-link { background: transparent; color: var(--orange); font-weight: 600; font-size: 15px; padding: 10px; border: none; cursor: pointer; }

/* DESTINATARIO NO REGISTRADO */
.not-found { display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 40px 24px; flex: 1; }
.nf-avatar { width: 80px; height: 80px; background: var(--gray-bg); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 36px; margin-bottom: 18px; position: relative; }
.nf-badge { position: absolute; bottom: 2px; right: 2px; width: 24px; height: 24px; background: var(--orange); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 13px; font-weight: 700; border: 2px solid white; }
.nf-title { font-size: 18px; font-weight: 700; color: var(--black); margin-bottom: 8px; }
.nf-sub { font-size: 14px; color: var(--gray-text); line-height: 1.5; margin-bottom: 28px; }
.nf-question { font-size: 15px; font-weight: 600; color: var(--black); margin-bottom: 14px; }

/* ÉXITO INSCRIPCIÓN */
.inscrito { display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 40px 24px; flex: 1; }
.inscrito-icon { width: 70px; height: 70px; background: var(--green); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 34px; margin-bottom: 18px; }
.inscrito-title { font-size: 17px; font-weight: 700; color: var(--black); margin-bottom: 8px; }
.inscrito-sub { font-size: 13px; color: var(--gray-text); line-height: 1.5; margin-bottom: 36px; }

/* TARJETA NARANJA */
.close-x { position: absolute; top: 16px; right: 16px; font-size: 26px; color: white; cursor: pointer; background: none; border: none; z-index: 10; }
.card-title { font-size: 20px; font-weight: 700; color: white; text-align: center; margin-bottom: 10px; }
.card-sub { font-size: 16px; color: white; text-align: center; margin-bottom: 36px; line-height: 1.4; }
.card-scene { position: relative; width: 220px; height: 180px; margin: 0 auto; }
.card-visual { width: 200px; height: 125px; background: linear-gradient(145deg, #f0f0f0, #ddd); border-radius: 12px; position: absolute; top: 0; left: 10px; box-shadow: 0 8px 24px rgba(0,0,0,.25); transform: rotate(-6deg); overflow: hidden; }
.card-chip { width: 36px; height: 28px; background: linear-gradient(135deg, #E8B84B, #C89830); border-radius: 4px; position: absolute; top: 18px; left: 18px; }
.card-flag { position: absolute; bottom: 12px; right: 12px; font-size: 36px; }
.card-reader { width: 160px; height: 90px; background: linear-gradient(145deg, #2C3E50, #1A252F); border-radius: 8px; position: absolute; bottom: 0; left: 30px; box-shadow: 0 4px 12px rgba(0,0,0,.3); }
.card-reader-slot { width: 100px; height: 6px; background: #0A0A0A; border-radius: 3px; position: absolute; top: 20px; left: 30px; }

/* CONVERSOR */
.dest-card { background: var(--gray-bg); border-radius: var(--r-sm); padding: 12px 14px; margin-bottom: 14px; display: flex; align-items: center; gap: 10px; }
.dest-icon { font-size: 20px; color: var(--gray-text); }
.dest-name { font-size: 15px; font-weight: 600; color: var(--black); }
.dest-meta { font-size: 12px; color: var(--gray-text); }
.currency-row { margin-bottom: 12px; }
.currency-row .clabel { font-size: 13px; font-weight: 500; color: var(--black); margin-bottom: 6px; display: block; }
.currency-box { display: flex; align-items: center; border: 1.5px solid var(--gray-border); border-radius: var(--r-sm); padding: 11px 14px; gap: 10px; background: var(--white); }
.currency-box:focus-within { border-color: var(--orange); }
.c-flag { font-size: 26px; flex-shrink: 0; }
.c-code { font-size: 14px; font-weight: 600; color: #444; flex-shrink: 0; }
.c-amount { flex: 1; font-size: 22px; font-weight: 600; border: none; outline: none; text-align: left; color: var(--black); }
.c-amount::placeholder { color: var(--gray-border); }
.rate-badge { display: flex; align-items: center; justify-content: center; gap: 6px; background: var(--gray-bg); border-radius: var(--r-sm); padding: 8px 12px; margin-bottom: 12px; }
.rate-badge span { font-size: 12px; color: var(--gray-text); }

/* RESUMEN TRANSACCIÓN */
.rt-label { font-size: 16px; font-weight: 700; color: var(--black); margin-bottom: 10px; }
.rt-card { background: var(--gray-bg); border-radius: var(--r-sm); margin-bottom: 12px; overflow: hidden; }
.rt-row { display: flex; align-items: center; gap: 8px; padding: 11px 14px; border-bottom: 1px solid var(--gray-border); }
.rt-row:last-child { border-bottom: none; }
.rt-flag { font-size: 22px; flex-shrink: 0; }
.rt-content { flex: 1; }
.rt-sub { font-size: 12px; color: var(--gray-text); }
.rt-val { font-size: 15px; font-weight: 700; color: var(--black); }
.rt-meta { font-size: 12px; color: var(--gray-text); }
.retorno-label { font-size: 13px; font-weight: 600; color: var(--black); margin: 14px 0 6px; display: flex; align-items: center; gap: 6px; }
.help-circle { width: 18px; height: 18px; background: var(--gray-bg); border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 11px; color: var(--gray-text); cursor: pointer; border: 1px solid var(--gray-border); }
.retorno-select-wrap { position: relative; margin-bottom: 4px; }
.retorno-select { width: 100%; padding: 13px 40px 13px 14px; border: 1.5px solid var(--gray-border); border-radius: var(--r-sm); font-size: 14px; color: var(--black); background: var(--white); -webkit-appearance: none; appearance: none; outline: none; }
.retorno-select:focus { border-color: var(--orange); }
.retorno-select-wrap::after { content: "▾"; position: absolute; right: 14px; top: 50%; transform: translateY(-50%); color: var(--orange); pointer-events: none; }
.obligatorio { font-size: 11px; color: var(--gray-text); margin-bottom: 12px; }

/* MEDIO DE PAGO */
.pago-title { font-size: 16px; font-weight: 700; color: var(--black); margin-bottom: 16px; }
.pago-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.pago-card { background: var(--white); border: 1.5px solid var(--gray-border); border-radius: var(--r-md); padding: 26px 14px; text-align: center; cursor: pointer; transition: all .15s; }
.pago-card:hover, .pago-card.selected { border-color: var(--orange); background: var(--orange-light); }
.pago-icon { font-size: 36px; margin-bottom: 10px; }
.pago-label { font-size: 14px; font-weight: 600; color: var(--black); }

/* CONFIRMACIÓN DATOS */
.cd-section-title { font-size: 15px; font-weight: 700; color: var(--black); margin: 0 0 10px; }
.confirm-card { background: var(--white); border: 1px solid var(--gray-border); border-radius: var(--r-sm); margin-bottom: 12px; overflow: hidden; }
.cc-row { display: flex; align-items: flex-start; gap: 10px; padding: 11px 14px; border-bottom: 1px solid var(--gray-border); }
.cc-row:last-child { border-bottom: none; }
.cc-icon { font-size: 17px; color: #555; flex-shrink: 0; margin-top: 2px; }
.cc-content { flex: 1; }
.cc-label { font-size: 12px; color: var(--gray-text); margin-bottom: 2px; }
.cc-value { font-size: 14px; font-weight: 700; color: var(--black); }
.chk-row { display: flex; align-items: flex-start; gap: 10px; margin: 12px 0; cursor: pointer; }
.chk-row input { width: 18px; height: 18px; accent-color: var(--orange); flex-shrink: 0; margin-top: 2px; cursor: pointer; }
.chk-row label { font-size: 13px; color: var(--black); cursor: pointer; line-height: 1.4; }

/* CONTRASEÑA OPERADOR */
.op-screen { flex: 1; display: flex; flex-direction: column; background: var(--white); }
.op-header-area { padding: 24px 20px 8px; }
.op-title { font-size: 20px; font-weight: 700; color: var(--black); margin-bottom: 16px; line-height: 1.3; }
.op-label { font-size: 14px; font-weight: 500; color: var(--black); margin-bottom: 8px; display: block; }
.op-input { width: 100%; padding: 14px; border: 1.5px solid var(--orange); border-radius: var(--r-sm); font-size: 22px; text-align: center; letter-spacing: 10px; color: var(--black); outline: none; background: var(--white); }
.op-keyboard { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; padding: 14px 20px 10px; }
.op-key { background: var(--white); border: 1px solid var(--gray-border); border-radius: var(--r-sm); padding: 16px 0; font-size: 22px; font-weight: 300; cursor: pointer; text-align: center; user-select: none; color: var(--black); transition: background .1s; }
.op-key:active { background: var(--gray-bg); }
.op-key.key-zero { grid-column: 2; }
.op-btn-wrap { padding: 0 20px 16px; }
.op-btn { width: 100%; padding: 14px; border: none; border-radius: var(--r-lg); font-size: 16px; font-weight: 600; background: var(--gray-border); color: #999; cursor: not-allowed; }
.op-btn.active { background: var(--orange); color: white; cursor: pointer; }

/* RESUMEN FINAL */
.final-screen { padding: 20px 16px; overflow-y: auto; flex: 1; }
.final-icon { width: 70px; height: 70px; background: var(--green); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 34px; margin: 0 auto 14px; }
.final-title { font-size: 16px; font-weight: 700; color: var(--black); text-align: center; margin-bottom: 18px; line-height: 1.4; }
.final-card { background: var(--white); border: 1px solid var(--gray-border); border-radius: var(--r-sm); margin-bottom: 10px; overflow: hidden; }
.fr-row { display: flex; align-items: flex-start; gap: 10px; padding: 10px 14px; border-bottom: 1px solid var(--gray-border); }
.fr-row:last-child { border-bottom: none; }
.fr-icon { font-size: 17px; color: #555; flex-shrink: 0; margin-top: 1px; }
.fr-content { flex: 1; }
.fr-label { font-size: 12px; color: var(--gray-text); }
.fr-value { font-size: 13px; font-weight: 700; color: var(--black); }
.print-q { font-size: 14px; text-align: center; color: var(--black); margin: 14px 0 10px; font-weight: 500; }

/* UTILS */
.mt-1 { margin-top: 8px; } .mt-2 { margin-top: 14px; } .mt-3 { margin-top: 20px; } .mt-4 { margin-top: 28px; }
.mb-1 { margin-bottom: 8px; } .mb-2 { margin-bottom: 14px; }

/* HOME — franja naranja superior */
body.home-bg {
  background: var(--gray-bg);
}
body.home-bg .phone {
  background: linear-gradient(
    to bottom,
    var(--orange) 145px,
    var(--gray-bg) 145px
  );
}

@media (max-width: 400px) { .phone { width: 100%; height: 100svh; } body { padding: 0; } }